<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Conservation Game | STEM Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        header {
            background: linear-gradient(90deg, #9b59b6, #2ecc71);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
        }
        
        h1 {
            font-size: 2.2rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        .game-area {
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .canvas-container {
            flex: 1;
            min-width: 300px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        #energyCanvas {
            background: #fff;
            border-radius: 8px;
            display: block;
            margin: 0 auto;
            border: 2px solid #9b59b6;
        }
        
        .controls {
            flex: 1;
            min-width: 300px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 2px solid #9b59b6;
        }
        
        .slider-container {
            margin: 15px 0;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input[type="range"] {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            background: #ddd;
            border-radius: 5px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #9b59b6;
            border-radius: 50%;
            cursor: pointer;
        }
        
        .value-display {
            text-align: center;
            font-weight: 600;
            color: #e74c3c;
            margin-top: 5px;
        }
        
        .buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        
        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        #startBtn {
            background: #2ecc71;
            color: white;
        }
        
        #startBtn:hover {
            background: #27ae60;
        }
        
        #resetBtn {
            background: #e74c3c;
            color: white;
        }
        
        #resetBtn:hover {
            background: #c0392b;
        }
        
        .concept-explanation {
            background: #f4e8fc;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #9b59b6;
        }
        
        .concept-explanation h3 {
            color: #9b59b6;
            margin-bottom: 10px;
        }
        
        .energy-container {
            display: flex;
            justify-content: space-around;
            background: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .energy-item {
            text-align: center;
        }
        
        .energy-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #f1c40f;
        }
        
        .energy-bar-container {
            height: 20px;
            background: #ddd;
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
            position: relative;
        }
        
        .energy-bar {
            height: 100%;
            width: 100%;
            background: #2ecc71;
            transition: width 0.3s;
        }
        
        .language-selector {
            text-align: center;
            margin: 15px 0;
        }
        
        select {
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid #9b59b6;
            background: white;
            font-weight: 600;
            color: #2c3e50;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background: #2c3e50;
            color: white;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">⚡</div>
                <div>
                    <h1>Energy Conservation Game</h1>
                    <div class="subtitle">Explore energy transformation through interactive simulation</div>
                </div>
            </div>
        </header>
        
        <div class="game-area">
            <div class="game-container">
                <div class="canvas-container">
                    <h2>Energy Transformation</h2>
                    <canvas id="energyCanvas" width="500" height="350"></canvas>
                </div>
                
                <div class="controls">
                    <h2>Control Panel</h2>
                    
                    <div class="control-group">
                        <label for="heightSlider">Initial Height (meters)</label>
                        <input type="range" id="heightSlider" min="5" max="100" value="50">
                        <div class="value-display" id="heightValue">50 m</div>
                    </div>
                    
                    <div class="control-group">
                        <label for="massSlider">Object Mass (kg)</label>
                        <input type="range" id="massSlider" min="1" max="20" value="5">
                        <div class="value-display" id="massValue">5 kg</div>
                    </div>
                    
                    <div class="control-group">
                        <label for="frictionSlider">Friction Coefficient</label>
                        <input type="range" id="frictionSlider" min="0" max="0.5" step="0.01" value="0.1">
                        <div class="value-display" id="frictionValue">0.1</div>
                    </div>
                    
                    <div class="buttons">
                        <button id="startBtn">Release Object</button>
                        <button id="resetBtn">Reset Simulation</button>
                    </div>
                    
                    <div class="energy-container">
                        <div class="energy-item">
                            <div>Potential Energy</div>
                            <div class="energy-value" id="potentialValue">0 J</div>
                            <div class="energy-bar-container">
                                <div class="energy-bar" id="potentialBar" style="width: 100%; background: #3498db;"></div>
                            </div>
                        </div>
                        <div class="energy-item">
                            <div>Kinetic Energy</div>
                            <div class="energy-value" id="kineticValue">0 J</div>
                            <div class="energy-bar-container">
                                <div class="energy-bar" id="kineticBar" style="width: 0%; background: #e74c3c;"></div>
                            </div>
                        </div>
                        <div class="energy-item">
                            <div>Thermal Energy</div>
                            <div class="energy-value" id="thermalValue">0 J</div>
                            <div class="energy-bar-container">
                                <div class="energy-bar" id="thermalBar" style="width: 0%; background: #f39c12;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="concept-explanation">
                <h3>Physics Concepts: Energy Conservation</h3>
                <p>The law of conservation of energy states that energy cannot be created or destroyed, only transformed from one form to another. In this simulation:</p>
                <ul>
                    <li><strong>Potential Energy</strong> (PE = mgh) is energy stored due to position</li>
                    <li><strong>Kinetic Energy</strong> (KE = ½mv²) is energy of motion</li>
                    <li><strong>Thermal Energy</strong> is generated through friction</li>
                    <li>Without friction, PE + KE remains constant</li>
                    <li>With friction, some mechanical energy converts to thermal energy</li>
                </ul>
                <p>Adjust the parameters to see how energy transforms between different forms!</p>
            </div>
            
            <div class="language-selector">
                <select id="languageSelect">
                    <option value="en">English</option>
                    <option value="hi">Hindi</option>
                    <option value="or">Odia</option>
                    <option value="te">Telugu</option>
                </select>
            </div>
        </div>
        
        <footer>
            <p>Gamified STEM Learning Platform | Developed for Government of Odisha</p>
            <p>This game works both online and offline, making it suitable for rural areas with limited connectivity</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const canvas = document.getElementById('energyCanvas');
        const ctx = canvas.getContext('2d');
        const heightSlider = document.getElementById('heightSlider');
        const massSlider = document.getElementById('massSlider');
        const frictionSlider = document.getElementById('frictionSlider');
        const heightValue = document.getElementById('heightValue');
        const massValue = document.getElementById('massValue');
        const frictionValue = document.getElementById('frictionValue');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const potentialValue = document.getElementById('potentialValue');
        const kineticValue = document.getElementById('kineticValue');
        const thermalValue = document.getElementById('thermalValue');
        const potentialBar = document.getElementById('potentialBar');
        const kineticBar = document.getElementById('kineticBar');
        const thermalBar = document.getElementById('thermalBar');
        
        // Game variables
        let animationId = null;
        let isSimulationRunning = false;
        let groundLevel = canvas.height - 50;
        let scale = 2; // Scale factor to fit the simulation on canvas
        
        // Physics constants
        const gravity = 9.8; // m/s²
        
        // Object properties
        let physicsObject = {
            x: canvas.width / 2,
            y: 0,
            radius: 15,
            color: '#9b59b6',
            mass: 5,
            height: 50,
            velocity: 0,
            potentialEnergy: 0,
            kineticEnergy: 0,
            thermalEnergy: 0,
            friction: 0.1,
            isOnRamp: false,
            angle: 30 * Math.PI / 180 // Ramp angle
        };
        
        // Initialize the game
        function init() {
            drawBackground();
            drawObject();
            
            // Event listeners for sliders
            heightSlider.addEventListener('input', function() {
                const height = parseInt(this.value);
                heightValue.textContent = `${height} m`;
                if (!isSimulationRunning) {
                    physicsObject.height = height;
                    physicsObject.y = groundLevel - height * scale;
                    updateEnergyDisplays();
                    drawBackground();
                    drawObject();
                }
            });
            
            massSlider.addEventListener('input', function() {
                const mass = parseInt(this.value);
                massValue.textContent = `${mass} kg`;
                if (!isSimulationRunning) {
                    physicsObject.mass = mass;
                    physicsObject.radius = 10 + mass / 2;
                    updateEnergyDisplays();
                    drawBackground();
                    drawObject();
                }
            });
            
            frictionSlider.addEventListener('input', function() {
                const friction = parseFloat(this.value);
                frictionValue.textContent = friction.toFixed(2);
                if (!isSimulationRunning) {
                    physicsObject.friction = friction;
                    drawBackground();
                }
            });
            
            // Start simulation button
            startBtn.addEventListener('click', startSimulation);
            
            // Reset simulation button
            resetBtn.addEventListener('click', resetSimulation);
            
            // Initial values
            physicsObject.height = parseInt(heightSlider.value);
            physicsObject.mass = parseInt(massSlider.value);
            physicsObject.friction = parseFloat(frictionSlider.value);
            physicsObject.radius = 10 + physicsObject.mass / 2;
            physicsObject.y = groundLevel - physicsObject.height * scale;
            
            updateEnergyDisplays();
        }
        
        // Draw the background
        function drawBackground() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw sky
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, canvas.width, groundLevel);
            
            // Draw ground
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, groundLevel, canvas.width, canvas.height - groundLevel);
            ctx.fillStyle = '#2E8B57';
            ctx.fillRect(0, groundLevel, canvas.width, 10);
            
            // Draw ramp
            const rampLength = 200;
            const rampHeight = rampLength * Math.sin(physicsObject.angle);
            
            ctx.fillStyle = '#7f8c8d';
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2 - 100, groundLevel);
            ctx.lineTo(canvas.width / 2 - 100 + rampLength * Math.cos(physicsObject.angle), groundLevel - rampHeight);
            ctx.lineTo(canvas.width / 2 - 100 + rampLength * Math.cos(physicsObject.angle), groundLevel);
            ctx.closePath();
            ctx.fill();
            
            // Draw horizontal surface
            ctx.fillStyle = '#95a5a6';
            ctx.fillRect(canvas.width / 2 - 100 + rampLength * Math.cos(physicsObject.angle), groundLevel - 5, 
                         canvas.width - (canvas.width / 2 - 100 + rampLength * Math.cos(physicsObject.angle)), 10);
            
            // Draw measurement markers
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.font = '10px Arial';
            ctx.fillStyle = '#333';
            
            // Height markers
            for (let h = 0; h <= 100; h += 10) {
                const y = groundLevel - h * scale;
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2 - 120, y);
                ctx.lineTo(canvas.width / 2 - 110, y);
                ctx.stroke();
                ctx.fillText(`${h}m`, canvas.width / 2 - 130, y + 5);
            }
            
            // Distance markers
            for (let d = 0; d < 200; d += 20) {
                const x = canvas.width / 2 - 100 + d * Math.cos(physicsObject.angle);
                const y = groundLevel - d * Math.sin(physicsObject.angle);
                ctx.beginPath();
                ctx.moveTo(x, y + 5);
                ctx.lineTo(x, y - 5);
                ctx.stroke();
                
                if (d > 0) {
                    ctx.save();
                    ctx.translate(x, y + 15);
                    ctx.rotate(-physicsObject.angle);
                    ctx.fillText(`${d}m`, 0, 0);
                    ctx.restore();
                }
            }
        }
        
        // Draw the object
        function drawObject() {
            ctx.beginPath();
            ctx.arc(physicsObject.x, physicsObject.y, physicsObject.radius, 0, Math.PI * 2);
            ctx.fillStyle = physicsObject.color;
            ctx.fill();
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 1;
            ctx.stroke();
            
            // Draw mass label
            ctx.font = '12px Arial';
            ctx.fillStyle = '#000';
            ctx.textAlign = 'center';
            ctx.fillText(`${physicsObject.mass}kg`, physicsObject.x, physicsObject.y + 5);
        }
        
        // Update energy displays
        function updateEnergyDisplays() {
            // Calculate energies
            const pe = physicsObject.mass * gravity * physicsObject.height;
            const ke = physicsObject.kineticEnergy;
            const thermal = physicsObject.thermalEnergy;
            const totalEnergy = pe + ke + thermal;
            
            // Update values
            potentialValue.textContent = `${pe.toFixed(1)} J`;
            kineticValue.textContent = `${ke.toFixed(1)} J`;
            thermalValue.textContent = `${thermal.toFixed(1)} J`;
            
            // Update bars
            if (totalEnergy > 0) {
                potentialBar.style.width = `${(pe / totalEnergy * 100)}%`;
                kineticBar.style.width = `${(ke / totalEnergy * 100)}%`;
                thermalBar.style.width = `${(thermal / totalEnergy * 100)}%`;
            }
        }
        
        // Start the simulation
        function startSimulation() {
            if (isSimulationRunning) return;
            
            isSimulationRunning = true;
            physicsObject.velocity = 0;
            physicsObject.thermalEnergy = 0;
            physicsObject.x = canvas.width / 2 - 100;
            physicsObject.y = groundLevel - physicsObject.height * scale;
            physicsObject.isOnRamp = true;
            
            // Disable controls during simulation
            heightSlider.disabled = true;
            massSlider.disabled = true;
            frictionSlider.disabled = true;
            startBtn.disabled = true;
            
            // Start animation
            animate();
        }
        
        // Reset the simulation
        function resetSimulation() {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            isSimulationRunning = false;
            
            // Enable controls
            heightSlider.disabled = false;
            massSlider.disabled = false;
            frictionSlider.disabled = false;
            startBtn.disabled = false;
            
            // Reset object position and energy
            physicsObject.height = parseInt(heightSlider.value);
            physicsObject.y = groundLevel - physicsObject.height * scale;
            physicsObject.x = canvas.width / 2 - 100;
            physicsObject.velocity = 0;
            physicsObject.kineticEnergy = 0;
            physicsObject.thermalEnergy = 0;
            physicsObject.isOnRamp = true;
            
            updateEnergyDisplays();
            drawBackground();
            drawObject();
        }
        
        // Animation loop
        function animate() {
            if (physicsObject.isOnRamp) {
                // On ramp motion
                const acceleration = gravity * Math.sin(physicsObject.angle) - physicsObject.friction * gravity * Math.cos(physicsObject.angle);
                physicsObject.velocity += acceleration * 0.05;
                
                const distance = physicsObject.velocity * 0.05;
                physicsObject.x += distance * Math.cos(physicsObject.angle) * scale;
                physicsObject.y -= distance * Math.sin(physicsObject.angle) * scale;
                
                // Calculate current height on ramp
                const rampLength = (physicsObject.x - (canvas.width / 2 - 100)) / Math.cos(physicsObject.angle);
                const currentHeight = rampLength * Math.sin(physicsObject.angle);
                
                // Update energies
                physicsObject.kineticEnergy = 0.5 * physicsObject.mass * physicsObject.velocity * physicsObject.velocity;
                const potentialHeight = physicsObject.height - (currentHeight / scale);
                physicsObject.potentialEnergy = physicsObject.mass * gravity * potentialHeight;
                
                // Check if reached bottom of ramp
                if (rampLength >= 200) {
                    physicsObject.isOnRamp = false;
                    physicsObject.x = canvas.width / 2 - 100 + 200 * Math.cos(physicsObject.angle);
                    physicsObject.y = groundLevel;
                }
            } else {
                // On flat surface motion
                const acceleration = -physicsObject.friction * gravity;
                physicsObject.velocity += acceleration * 0.05;
                
                if (physicsObject.velocity > 0) {
                    physicsObject.x += physicsObject.velocity * 0.05 * scale;
                } else {
                    physicsObject.velocity = 0;
                }
                
                // Update energies
                physicsObject.kineticEnergy = 0.5 * physicsObject.mass * physicsObject.velocity * physicsObject.velocity;
                physicsObject.potentialEnergy = 0;
                
                // Calculate thermal energy from friction
                const frictionForce = physicsObject.friction * physicsObject.mass * gravity;
                const distance = physicsObject.velocity * 0.05;
                physicsObject.thermalEnergy += frictionForce * distance;
            }
            
            // Update energy displays
            updateEnergyDisplays();
            
            // Draw frame
            drawBackground();
            drawObject();
            
            // Check if object has stopped
            if (!physicsObject.isOnRamp && physicsObject.velocity <= 0) {
                isSimulationRunning = false;
                
                // Re-enable controls
                heightSlider.disabled = false;
                massSlider.disabled = false;
                frictionSlider.disabled = false;
                startBtn.disabled = false;
                
                return;
            }
            
            // Continue animation
            animationId = requestAnimationFrame(animate);
        }
        
        // Initialize the game when the window loads
        window.addEventListener('load', init);
        
        // Language selector functionality
        document.getElementById('languageSelect').addEventListener('change', function() {
            alert(`Language changed to ${this.options[this.selectedIndex].text}. This would update all text in a complete implementation.`);
        });
    </script>
</body>
</html>