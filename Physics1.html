<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics Motion Game | STEM Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        header {
            background: linear-gradient(90deg, #3498db, #2ecc71);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
        }
        
        h1 {
            font-size: 2.2rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        .game-area {
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .canvas-container {
            flex: 1;
            min-width: 300px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        #gameCanvas {
            background: #fff;
            border-radius: 8px;
            display: block;
            margin: 0 auto;
            border: 2px solid #3498db;
        }
        
        .controls {
            flex: 1;
            min-width: 300px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 2px solid #3498db;
        }
        
        .slider-container {
            margin: 15px 0;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input[type="range"] {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            background: #ddd;
            border-radius: 5px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #3498db;
            border-radius: 50%;
            cursor: pointer;
        }
        
        .value-display {
            text-align: center;
            font-weight: 600;
            color: #e74c3c;
            margin-top: 5px;
        }
        
        .buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        
        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        #startBtn {
            background: #2ecc71;
            color: white;
        }
        
        #startBtn:hover {
            background: #27ae60;
        }
        
        #resetBtn {
            background: #e74c3c;
            color: white;
        }
        
        #resetBtn:hover {
            background: #c0392b;
        }
        
        .concept-explanation {
            background: #e8f4fc;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #3498db;
        }
        
        .concept-explanation h3 {
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .score-container {
            display: flex;
            justify-content: space-around;
            background: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .score-item {
            text-align: center;
        }
        
        .score-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #f1c40f;
        }
        
        .language-selector {
            text-align: center;
            margin: 15px 0;
        }
        
        select {
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid #3498db;
            background: white;
            font-weight: 600;
            color: #2c3e50;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background: #2c3e50;
            color: white;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">⚛️</div>
                <div>
                    <h1>Physics Motion Game</h1>
                    <div class="subtitle">Learn motion concepts through interactive simulation</div>
                </div>
            </div>
        </header>
        
        <div class="game-area">
            <div class="game-container">
                <div class="canvas-container">
                    <h2>Motion Simulation</h2>
                    <canvas id="gameCanvas" width="500" height="350"></canvas>
                </div>
                
                <div class="controls">
                    <h2>Control Panel</h2>
                    
                    <div class="control-group">
                        <label for="angleSlider">Launch Angle (degrees)</label>
                        <input type="range" id="angleSlider" min="0" max="90" value="45">
                        <div class="value-display" id="angleValue">45°</div>
                    </div>
                    
                    <div class="control-group">
                        <label for="velocitySlider">Initial Velocity (m/s)</label>
                        <input type="range" id="velocitySlider" min="10" max="100" value="50">
                        <div class="value-display" id="velocityValue">50 m/s</div>
                    </div>
                    
                    <div class="control-group">
                        <label for="massSlider">Projectile Mass (kg)</label>
                        <input type="range" id="massSlider" min="1" max="20" value="5">
                        <div class="value-display" id="massValue">5 kg</div>
                    </div>
                    
                    <div class="buttons">
                        <button id="startBtn">Launch Projectile</button>
                        <button id="resetBtn">Reset Simulation</button>
                    </div>
                    
                    <div class="score-container">
                        <div class="score-item">
                            <div>Distance</div>
                            <div class="score-value" id="distanceValue">0 m</div>
                        </div>
                        <div class="score-item">
                            <div>Height</div>
                            <div class="score-value" id="heightValue">0 m</div>
                        </div>
                        <div class="score-item">
                            <div>Time</div>
                            <div class="score-value" id="timeValue">0 s</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="concept-explanation">
                <h3>Physics Concepts: Projectile Motion</h3>
                <p>Projectile motion is a form of motion where an object moves in a parabolic path. The path is curved due to the influence of gravity. The motion can be broken down into horizontal and vertical components:</p>
                <ul>
                    <li><strong>Horizontal motion</strong> is constant velocity (no acceleration)</li>
                    <li><strong>Vertical motion</strong> is accelerated motion (due to gravity)</li>
                    <li>The <strong>range</strong> is maximized at a 45° launch angle</li>
                    <li>The <strong>time of flight</strong> depends on initial vertical velocity</li>
                </ul>
                <p>Adjust the parameters to see how they affect the projectile's trajectory!</p>
            </div>
            
            <div class="language-selector">
                <select id="languageSelect">
                    <option value="en">English</option>
                    <option value="hi">Hindi</option>
                    <option value="or">Odia</option>
                    <option value="te">Telugu</option>
                </select>
            </div>
        </div>
        
        <footer>
            <p>Gamified STEM Learning Platform | Developed for Government of Odisha</p>
            <p>This game works both online and offline, making it suitable for rural areas with limited connectivity</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const angleSlider = document.getElementById('angleSlider');
        const velocitySlider = document.getElementById('velocitySlider');
        const massSlider = document.getElementById('massSlider');
        const angleValue = document.getElementById('angleValue');
        const velocityValue = document.getElementById('velocityValue');
        const massValue = document.getElementById('massValue');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const distanceValue = document.getElementById('distanceValue');
        const heightValue = document.getElementById('heightValue');
        const timeValue = document.getElementById('timeValue');
        
        // Game variables
        let animationId = null;
        let isSimulationRunning = false;
        let groundLevel = canvas.height - 50;
        let scale = 3; // Scale factor to fit the simulation on canvas
        
        // Projectile properties
        let projectile = {
            x: 50,
            y: groundLevel,
            radius: 10,
            color: '#e74c3c',
            velocity: 0,
            angle: 0,
            vx: 0,
            vy: 0,
            mass: 5,
            time: 0,
            maxHeight: 0,
            distance: 0
        };
        
        // Environment constants
        const gravity = 9.8; // m/s²
        
        // Initialize the game
        function init() {
            drawBackground();
            drawProjectile();
            
            // Event listeners for sliders
            angleSlider.addEventListener('input', function() {
                const angle = parseInt(this.value);
                angleValue.textContent = `${angle}°`;
                if (!isSimulationRunning) {
                    projectile.angle = angle * Math.PI / 180;
                    drawBackground();
                    drawTrajectoryGuide();
                    drawProjectile();
                }
            });
            
            velocitySlider.addEventListener('input', function() {
                const velocity = parseInt(this.value);
                velocityValue.textContent = `${velocity} m/s`;
                if (!isSimulationRunning) {
                    projectile.velocity = velocity;
                    drawBackground();
                    drawTrajectoryGuide();
                    drawProjectile();
                }
            });
            
            massSlider.addEventListener('input', function() {
                const mass = parseInt(this.value);
                massValue.textContent = `${mass} kg`;
                if (!isSimulationRunning) {
                    projectile.mass = mass;
                    projectile.radius = 5 + mass / 2;
                    drawBackground();
                    drawProjectile();
                }
            });
            
            // Start simulation button
            startBtn.addEventListener('click', startSimulation);
            
            // Reset simulation button
            resetBtn.addEventListener('click', resetSimulation);
            
            // Initial values
            projectile.angle = parseInt(angleSlider.value) * Math.PI / 180;
            projectile.velocity = parseInt(velocitySlider.value);
            projectile.mass = parseInt(massSlider.value);
            projectile.radius = 5 + projectile.mass / 2;
            
            drawTrajectoryGuide();
        }
        
        // Draw the background
        function drawBackground() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw sky
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, canvas.width, groundLevel);
            
            // Draw ground
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, groundLevel, canvas.width, canvas.height - groundLevel);
            ctx.fillStyle = '#2E8B57';
            ctx.fillRect(0, groundLevel, canvas.width, 10);
            
            // Draw measurement markers
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            for (let x = 50; x < canvas.width; x += 50) {
                ctx.beginPath();
                ctx.moveTo(x, groundLevel - 10);
                ctx.lineTo(x, groundLevel);
                ctx.stroke();
                
                ctx.font = '10px Arial';
                ctx.fillStyle = '#333';
                ctx.fillText(`${(x - 50)/scale}m`, x - 5, groundLevel + 15);
            }
            
            // Draw launcher
            ctx.fillStyle = '#333';
            ctx.fillRect(40, groundLevel - 20, 20, 20);
            
            // Draw angle guide
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(50, groundLevel);
            ctx.lineTo(50 + 40 * Math.cos(projectile.angle), groundLevel - 40 * Math.sin(projectile.angle));
            ctx.stroke();
            ctx.setLineDash([]);
        }
        
        // Draw the projectile
        function drawProjectile() {
            ctx.beginPath();
            ctx.arc(projectile.x, projectile.y, projectile.radius, 0, Math.PI * 2);
            ctx.fillStyle = projectile.color;
            ctx.fill();
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 1;
            ctx.stroke();
        }
        
        // Draw trajectory guide
        function drawTrajectoryGuide() {
            ctx.strokeStyle = 'rgba(52, 152, 219, 0.5)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            
            const v0 = projectile.velocity;
            const angle = projectile.angle;
            const startX = projectile.x;
            const startY = projectile.y;
            
            for (let t = 0; t < 20; t += 0.2) {
                const x = startX + (v0 * Math.cos(angle) * t) * scale;
                const y = startY - (v0 * Math.sin(angle) * t - 0.5 * gravity * t * t) * scale;
                
                if (y > groundLevel) break;
                
                if (t === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            
            ctx.stroke();
        }
        
        // Start the simulation
        function startSimulation() {
            if (isSimulationRunning) return;
            
            isSimulationRunning = true;
            projectile.time = 0;
            projectile.maxHeight = 0;
            projectile.distance = 0;
            
            const angle = parseInt(angleSlider.value) * Math.PI / 180;
            const velocity = parseInt(velocitySlider.value);
            
            projectile.vx = velocity * Math.cos(angle);
            projectile.vy = -velocity * Math.sin(angle);
            projectile.x = 50;
            projectile.y = groundLevel;
            
            // Disable controls during simulation
            angleSlider.disabled = true;
            velocitySlider.disabled = true;
            massSlider.disabled = true;
            startBtn.disabled = true;
            
            // Start animation
            animate();
        }
        
        // Reset the simulation
        function resetSimulation() {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            isSimulationRunning = false;
            
            // Enable controls
            angleSlider.disabled = false;
            velocitySlider.disabled = false;
            massSlider.disabled = false;
            startBtn.disabled = false;
            
            // Reset projectile position
            projectile.x = 50;
            projectile.y = groundLevel;
            
            // Reset displays
            distanceValue.textContent = '0 m';
            heightValue.textContent = '0 m';
            timeValue.textContent = '0 s';
            
            drawBackground();
            drawTrajectoryGuide();
            drawProjectile();
        }
        
        // Animation loop
        function animate() {
            // Update time
            projectile.time += 0.05;
            
            // Update position
            projectile.x = 50 + (projectile.vx * projectile.time) * scale;
            projectile.y = groundLevel + (projectile.vy * projectile.time + 0.5 * gravity * projectile.time * projectile.time) * scale;
            
            // Update max height
            const currentHeight = groundLevel - projectile.y;
            if (currentHeight > projectile.maxHeight) {
                projectile.maxHeight = currentHeight;
            }
            
            // Update distance
            projectile.distance = (projectile.x - 50) / scale;
            
            // Update displays
            distanceValue.textContent = `${projectile.distance.toFixed(1)} m`;
            heightValue.textContent = `${projectile.maxHeight.toFixed(1)} m`;
            timeValue.textContent = `${projectile.time.toFixed(1)} s`;
            
            // Check if projectile hit the ground
            if (projectile.y >= groundLevel) {
                projectile.y = groundLevel;
                drawBackground();
                drawProjectile();
                isSimulationRunning = false;
                
                // Re-enable controls
                angleSlider.disabled = false;
                velocitySlider.disabled = false;
                massSlider.disabled = false;
                startBtn.disabled = false;
                
                return;
            }
            
            // Draw frame
            drawBackground();
            drawProjectile();
            
            // Continue animation
            animationId = requestAnimationFrame(animate);
        }
        
        // Initialize the game when the window loads
        window.addEventListener('load', init);
        
        // Service Worker Registration for Offline Functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js').then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
        
        // Language selector functionality
        document.getElementById('languageSelect').addEventListener('change', function() {
            // In a real implementation, this would change the language of all text
            alert(`Language changed to ${this.options[this.selectedIndex].text}. This would update all text in a complete implementation.`);
        });
    </script>
</body>
</html>